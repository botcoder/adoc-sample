plugins {
  id "org.asciidoctor.gradle.asciidoctor" version "1.5.0"
}

asciidoctor {
    sourceDocumentNames = files('src/article.adoc')
    sourceDir = new File('src')
    backends = ['html5']
    outputDir = new File("$buildDir/docs")
    options = [
        doctype: 'article',
        attributes: 'toc=right source-highlighter=coderay toc-title=Table\\ of\\ Contents'
    ]
}

task adoc (type: Exec, dependsOn: 'build') {
    executable 'asciidoc'
    args '-a', 'data-uri', '-b', 'xhtml11', '-o', 'build/article.html', 'src/article.adoc'
}

task apdf (type: Exec, dependsOn: 'build') {
    executable 'a2x'
    args '-f', 'pdf', '-d', 'book', '-D', 'build/', 'src/article.adoc'
}

task build {
    mkdir('build')
}

defaultTasks 'clean'
